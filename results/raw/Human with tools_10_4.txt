{'reasoning': "Using Shelf First Fit Decreasing Height (FFDH): 1) Sort rectangles by height descending. 2) Place each rectangle in first shelf where it fits. 3) Create new shelf if needed, new board if shelf doesn't fit. 4) Try rotation to fit better.", 'python_code': 'def solve_2d_cutting(rectangles, board_width, board_height):\n    """\n    Solve 2D cutting using Shelf First Fit Decreasing Height.\n    Returns dict with num_boards and placements.\n    """\n    # Sort by max dimension descending, keep original indices\n    indexed_rects = sorted(enumerate(rectangles), key=lambda x: -max(x[1]))\n    \n    # boards[i] = list of shelves, each shelf = [y, height, x_used]\n    boards = []\n    all_placements = [None] * len(rectangles)\n    \n    for orig_idx, (w, h) in indexed_rects:\n        placed = False\n        best_placement = None\n        \n        # Try both orientations\n        for rotated in [False, True]:\n            if rotated:\n                rw, rh = h, w\n            else:\n                rw, rh = w, h\n            \n            if rw > board_width or rh > board_height:\n                continue\n            \n            # Try existing boards\n            for board_idx, board in enumerate(boards):\n                # Try existing shelves\n                for shelf in board:\n                    shelf_y, shelf_h, x_used = shelf\n                    if rh <= shelf_h and x_used + rw <= board_width:\n                        # Place here\n                        best_placement = (board_idx, x_used, shelf_y, rotated, shelf, rw)\n                        break\n                \n                if best_placement:\n                    break\n                \n                # Try new shelf on this board\n                total_h = sum(s[1] for s in board)\n                if total_h + rh <= board_height:\n                    new_shelf = [total_h, rh, 0]\n                    board.append(new_shelf)\n                    best_placement = (board_idx, 0, total_h, rotated, new_shelf, rw)\n                    break\n            \n            if best_placement:\n                break\n        \n        if best_placement:\n            board_idx, x, y, rot, shelf, rw = best_placement\n            all_placements[orig_idx] = (board_idx, x, y, rot)\n            shelf[2] += rw\n            placed = True\n        \n        if not placed:\n            # New board - use best orientation\n            if w <= board_width and h <= board_height:\n                rw, rh, rot = w, h, False\n            else:\n                rw, rh, rot = h, w, True\n            board_idx = len(boards)\n            boards.append([[0, rh, rw]])\n            all_placements[orig_idx] = (board_idx, 0, 0, rot)\n    \n    return {\n        "num_boards": len(boards),\n        "placements": all_placements\n    }\n'}